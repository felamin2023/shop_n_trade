generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  userID       String        @id @default(uuid())
  fullname     String
  email        String        @unique
  address      String
  password     String
  contact      String
  img          String
  role         Role          @default(USER)
  transactions Transaction[]

  @@index([email], map: "idx_user_email")
}

model Product {
  productID    String        @id @default(uuid())
  product      String
  material     String
  materialGoal Int
  stock        Int
  img          String
  transactions Transaction[]

  @@index([product], map: "idx_product_name")
}

model Project {
  projectID String        @id @default(uuid())
  school    String
  location  String
  itemgoal  Int
  status    ProjectStatus @default(PENDING)
}

model Transaction {
  transacID     String            @id @default(uuid())
  status        TransactionStatus @default(PENDING)
  productID     String
  userID        String
  createdAt     DateTime          @default(now())
  images        String[]
  scheduledDate String?
  scheduledTime String?
  product       Product           @relation(fields: [productID], references: [productID])
  user          User              @relation(fields: [userID], references: [userID])
}

enum Role {
  USER
  ADMIN
}

enum ProjectStatus {
  PENDING
  DONE
}

enum TransactionStatus {
  PENDING
  REJECTED
  ACCEPTED
  DELIVERED
}
